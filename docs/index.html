<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>アクティブユーザー管理</title>
</head>
<body>
<input type="button" onClick="onClick()">	

  <script>
// WebSocketの設定
const ws = new WebSocket("wss://cloud.achex.ca/testcount");

var name = Math.random().toString(32).substring(2);



ws.onmessage = e => {
	var obj = JSON.parse(e.data);
	if (obj.message == "Login") {
	Name = [];
 	ws.send(JSON.stringify({"to": "testcount", "message": "SendName"}));
	}
  else if (obj.message == "SendName"){
    Name = Name.push(msg.Name);
	  console.log(Name);
  }
}

ws.onopen = e => {
	ws.send(JSON.stringify({"auth": "testcount", "password": "1234"}));
	ws.send(JSON.stringify({"to": "testcount", "message": "Login", "msg": Name}));
}

ws.onclosed = e => {
console.log('closed');
}
  </script>
</body>
</html>
